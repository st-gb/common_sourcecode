instead of preprocessor macro:
scope all (OS-)specific stuff and make typedef like:
"typedef OperatingSystem Linux" ?
